#textdomain wesnoth-Conquest

# DEFINED_UNIT macro creates only the message.
# CONQUEST_UNIT macro creates the message and the unit stats.

# How the presentation to the player looks can be easily changed by changing the label and/or description
# in these two macros (This is the reason why these macros exist.)


# These macros make use of optional arguments. While that is very useful here,
# error message are very unclear. Often the cause will be that one gave a argument to much/less,
# or mixed up the DEFINED_UNIT and CONQUEST_UNIT macros.

# Also, when it is over multiple lines, the closing parentheses and braces are not allowed to be in an extra line.



#textdomain wesnoth-lib
#define DAMAGE_STRING
_"Damage" #enddef

#textdomain wesnoth
#define HP_STRING
_"HP" #enddef

#define MP_STRING
_"MP" #enddef

#define GOLD_STRING
_"Gold" #enddef

#textdomain wesnoth-help
#define FIRSTSTIKE_STRING
_"first strike" #enddef

#textdomain wesnoth-anl
#define BACK_STRING
_"Back" #enddef

#textdomain wesnoth-Conquest

# _"(+1 gold per turn if worker is standing on a city)"

#define WORKER_STRING
_"+1 gold per turn in a city" #enddef





#define DEFINED_UNIT LVL NAME HP_TOTAL MP EVENT DAMAGE ATTACKS

#arg ASSASSIN_TEXT
"" #endarg

	# Will look combined like:
	#
	# Infantry    HP: 65
	# 3 Gold      12x4 Damage
	#             7 MP

	label={NAME} + "
" + {LVL} + " " + {GOLD_STRING}

# 2-line variant:
#	description={HP_STRING} + ": " + {HP_TOTAL} + " " + {MP_STRING} + ": " + {MP}+"
#" + {DAMAGE} + "x" + {ATTACKS} + " " + {DAMAGE_STRING} + {ASSASSIN_TEXT}

	description={HP_STRING} + ": " + {HP_TOTAL} +"
" + {DAMAGE} + "x" + {ATTACKS} + " " + {DAMAGE_STRING} + {ASSASSIN_TEXT} + "
" + {MP} + " " {MP_STRING}


	[command]
		[if]
			[variable]
				name=gold
				greater_than_equal_to={LVL}
			[/variable]
			[then]
				[gold]
					amount=-{LVL}
					side=$side_number
				[/gold]
				[set_variables]
					name=ce_spawn
					[value]
						animate=no
						side=$side_number
						x=$x1
						y=$y1
					[/value]
				[/set_variables]
				[fire_event]
					name=ce_spawn_{EVENT}
				[/fire_event]
				{CLEAR_VARIABLE ce_spawn}
			[/then]
			[else]
				[message]
					side_for=$side_number
					message=_ "Insufficient Funds…"
					speaker=narrator
				[/message]
			[/else]
		[/if]
	[/command]
#enddef





#define CONQUEST_UNIT LVL NAME HP_TOTAL MP TYPE DAMAGE ATTACKS HP

#arg LEVEL
{LVL} #endarg

#arg EXTRA_SPECIALS
#endarg

# Can use this like (REMOVE_ATTACK=
# [or]
#     name=attackname
# [/or])

#arg REMOVE_ATTACK
#endarg

#arg EXTRA_EFFECT
#endarg

#arg ALIGN
	[effect]
		apply_to=alignment
		set=neutral
	[/effect]
#endarg

#arg REMOVE
types #endarg

#arg ADV
amla_default #endarg

#arg WORKER_TEXT
"" #endarg

#arg ASSASSIN_TEXT
"" #endarg

#arg ENCHANTRESS_TEXT
"" #endarg

	label={NAME} + "
" + {LVL} + " " + {GOLD_STRING}

# 2-line variant:
#	description={HP_STRING} + ": " + {HP_TOTAL} + " " + {MP_STRING} + ": " + {MP} + {ENCHANTRESS_TEXT} + "
#" + {DAMAGE} + "x" + {ATTACKS} + " " + {DAMAGE_STRING} + {ASSASSIN_TEXT} + {WORKER_TEXT}

	description={HP_STRING} + ": " + {HP_TOTAL} + "
" + {DAMAGE} + "x" + {ATTACKS} + " " + {DAMAGE_STRING} + {ASSASSIN_TEXT} + "
" + {MP} + " " + {MP_STRING} + {ENCHANTRESS_TEXT} + {WORKER_TEXT}

	[command]
		[if]
			[variable]
				name=gold
				greater_than_equal_to={LVL}
			[/variable]
			[then]
				[gold]
					amount=-{LVL}
					side=$side_number
				[/gold]

				[unit]
					unrenamable=yes
					name={NAME}
					type={TYPE}
					side=$side_number
					x=$x1
					y=$y1
					random_traits=no
					random_gender=yes
					upkeep=loyal
					moves=1
					[modifications]
						[object]
							[effect]
								apply_to=remove_attacks
								range=ranged
								{REMOVE_ATTACK}
							[/effect]
							[effect]
								apply_to=attack
								set_type=blade
								set_damage={DAMAGE}
								set_attacks={ATTACKS}
								[set_specials]
									mode=replace
									{WEAPON_SPECIAL_BERSERK}
									{EXTRA_SPECIALS}
								[/set_specials]
							[/effect]
							[effect]
								apply_to=hitpoints
								increase_total={HP}
								increase={HP}
							[/effect]
							[effect]
								apply_to=movement
								set={MP}
							[/effect]
							[effect]
								apply_to=resistance
								replace=yes
								[resistance]
									blade=100
									pierce=100
									impact=100
									fire=100
									cold=100
									arcane=100
								[/resistance]
							[/effect]
							[effect]
								apply_to=remove_ability
								[experimental_filter_ability][/experimental_filter_ability]
							[/effect]
							{ALIGN}
							[effect]
								apply_to=level
								set={LEVEL}
							[/effect]
							[effect]
								apply_to=remove_advancement
								{REMOVE}={ADV}
							[/effect]
							{EXTRA_EFFECT}
						[/object]
					[/modifications]
				[/unit]
			[/then]
			[else]
				[message]
					side_for=$side_number
					message=_ "Insufficient Funds…"
					speaker=narrator
				[/message]
			[/else]
		[/if]
	[/command]
#enddef

#define ASSASSIN_OPTION
	{DEFINED_UNIT 15 _"Assassin" 185 8 15g_Assassin 15 6 (ASSASSIN_TEXT=" ("+ {FIRSTSTIKE_STRING} + ")
" + _"90x6 versus 25 gold units" )}
	image="units/human-outlaws/assassin.png~TC($side_number, magenta)"
#enddef

#define HUMAN_RECRUITS VILLAGE_TYPE
	# The most used units.
	# In difference to other factions they have firststrike on a few units.
	[elseif]
		[have_location]
			x,y=$x1,$y1
			terrain={VILLAGE_TYPE}
		[/have_location]
		[then]
			[message]
				speaker=narrator
				image="portraits/humans/knight.webp"
				message=_ "You have $gold gold. Select a unit to recruit:"
				wait_description=_"recruitment"
				[option]
					label={BACK_STRING}
				[/option]
				[option]
					# po: 1 gold unit
					{DEFINED_UNIT 1 _"Militia" " 25" 7 1g_militia 12 2}
					image="units/human-loyalists/spearman.png~TC($side_number, magenta)"
				[/option]
				[option]
					# po: 3 gold unit
					{DEFINED_UNIT 3 _"Infantry" " 65" 7 3g_Sergeant 12 4}
					image="units/human-loyalists/sergeant.png~TC($side_number, magenta)"
				[/option]
				[option]
					# po: 5 gold unit
					{DEFINED_UNIT 5 _"Cavalry" " 90" 10 5g_Cavalry 12 6}
					image="units/human-loyalists/dragoon/dragoon.png~TC($side_number, magenta)"
				[/option]
				[option]
					# po: 5 gold unit
					{DEFINED_UNIT 5 _"Pikeman" 100 4 5g_Pikeman 15 5}
					image="units/human-loyalists/pikeman.png~TC($side_number, magenta)"
				[/option]
				[option]
					# po: 8 gold unit
					{DEFINED_UNIT 8 _"Elite Infantry" 130 7 8g_Eliteinfantry 18 6}
					image="units/human-loyalists/lieutenant.png~TC($side_number, magenta)"
				[/option]
				[option]
					# po: 10 gold unit
					{DEFINED_UNIT 10 _"Lancer" 150 10 10g_Lancer 22 6 (ASSASSIN_TEXT=" ("+{FIRSTSTIKE_STRING} + ")" )}
					image="units/human-loyalists/paladin/paladin.png~TC($side_number, magenta)~CROP(1,1,88,88)"
				[/option]
				[option]
					# po: 15 gold unit
					{DEFINED_UNIT 15 _"Commander" 200 8 15g_Lieutenant 36 5}
					image="units/human-loyalists/general.png~TC($side_number, magenta)"
				[/option]
				[option]
					{ASSASSIN_OPTION}
				[/option]
				[option]
					# po: 20 gold unit
					{DEFINED_UNIT 20 _"Knight" 250 10 20g_Knight 44 6 (ASSASSIN_TEXT=" ("+{FIRSTSTIKE_STRING} + ")" )}
					image="units/human-loyalists/grand-knight/grand-knight.png~TC($side_number, magenta)~CROP(6,6,86,86)"
				[/option]
				[option]
					# po: 25 gold unit
					{DEFINED_UNIT 25 _"Leader" 300 8 25g_General 45 8}
					image="units/human-loyalists/royal-warrior.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 4 _"Worker" " 20" 5 (Peasant) 10 1 2 (ADV=Spearman,Bowman) LEVEL=0 (WORKER_TEXT="
" + {WORKER_STRING} ) (EXTRA_EFFECT={CE_ABILITY_WORKER}
						[effect]
							apply_to=zoc
							value=yes
						[/effect])}
					image="units/human-peasants/peasant.png~TC($side_number, magenta)"
				[/option]
			[/message]
		[/then]
	[/elseif]
#enddef

#define DWARVES_RECRUITS VILLAGE_TYPE
	# These units fill the levels 2,4,6.
	# They have lower defense values than others due to the dwarvish movetype.
	# Can move quicker in mountains and have 1 move less.
	# Have flying cavalry.
	[elseif]
		[have_location]
			x,y=$x1,$y1
			terrain={VILLAGE_TYPE}
		[/have_location]
		[then]
			[message]
				speaker=narrator
				image="portraits/dwarves/sentinel.webp"
				message=_ "You have $gold gold. Select a unit to recruit:"
				wait_description=_"recruitment"
				[option]
					label={BACK_STRING}
				[/option]
				[option]
					{DEFINED_UNIT 2 _"Militia" " 45" 6 2g_Dwarvishguardsman 12 3}
					image="units/dwarves/guard.png~TC($side_number, magenta)"
				[/option]
				[option]
					{DEFINED_UNIT 4 _"Infantry" " 80" 6  4g_Dwarvishstalwart 12 5}
					image="units/dwarves/stalwart.png~TC($side_number, magenta)"
				[/option]
				[option]
					{DEFINED_UNIT 6 _"Cavalry" 100 10 6g_Gryphonmaster 13 6}
					image="units/dwarves/gryphon-master.png~TC($side_number, magenta)"
				[/option]
				[option]
					{DEFINED_UNIT 10 _"Elite Infantry" 150 6 10g_Dwarvishsentinel 22 6}
					image="units/dwarves/sentinel.png~TC($side_number, magenta)"
				[/option]
				[option]
					{DEFINED_UNIT 15 _"Commander" 200 7 15g_Dwarvishlord 36 5}
					image="units/dwarves/lord.png~TC($side_number, magenta)"
				[/option]
				[option]
					{ASSASSIN_OPTION}
				[/option]
				[option]
					# po: 20 gold unit
					{CONQUEST_UNIT 20 _"Spider" 250 7 (Giant Spider) 44 6 196 REMOVE=amlas}
					image="units/monsters/spider.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 4 _"Worker" " 20" 5 (Dwarvish Miner) 10 1 -5 REMOVE=amlas ALIGN= LEVEL=0 (WORKER_TEXT="
" + {WORKER_STRING}) EXTRA_EFFECT={CE_ABILITY_WORKER} }
					image="units/dwarves/miner.png~TC($side_number, magenta)"
				[/option]
			[/message]
		[/then]
	[/elseif]
#enddef

#define DRAKES_RECRUITS VILLAGE_TYPE
	# Another factions which also fills the level 2,4,6.
	# Also low defense values due to movetype. But can fly.
	[elseif]
		[have_location]
			x,y=$x1,$y1
			terrain={VILLAGE_TYPE}
		[/have_location]
		[then]
			[message]
				speaker=narrator
				image="portraits/drakes/clasher.webp"
				message=_ "You have $gold gold. Select a unit to recruit:"
				wait_description=_"recruitment"
				[option]
					label={BACK_STRING}
				[/option]
				[option]
					{CONQUEST_UNIT 2 _"Militia" " 45" 7 (Drake Fighter) 12 3 6 (ADV=Drake Warrior)}
					image="units/drakes/fighter.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 4 _"Infantry" " 80" 7 (Drake Warrior) 12 5 20 (ADV=Drake Blademaster)}
					image="units/drakes/warrior.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 6 _"Cavalry" 100 10 (Sky Drake) 12 6 55 (ADV=Hurricane Drake)}
					image="units/drakes/sky.png~TC($side_number, magenta)"
				[/option]

				#[option]
				#	# po: 8 gold unit
				#	{CONQUEST_UNIT 8 _"Hurricane Cavalry" 130 10 (Hurricane Drake) 18 6 72 REMOVE=amlas}
				#	image="units/drakes/hurricane.png~TC($side_number, magenta)"
				#[/option]

				[option]
					{CONQUEST_UNIT 10 _"Elite Infantry" 150 7 (Drake Flare) 22 6 95 (ADV=Drake Flameheart)}
					image="units/drakes/flare.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 15 _"Commander" 200 8 (Drake Flameheart) 36 5 128 REMOVE=amlas}
					image="units/drakes/flameheart.png~TC($side_number, magenta)"
				[/option]
				[option]
					# po: 25 gold unit
					{CONQUEST_UNIT 25 _"Inferno Drake" 300 8 (Inferno Drake) 45 8 218 REMOVE=amlas
						(EXTRA_EFFECT={CE_ABILITY_GENERAL})}
					image="units/drakes/inferno.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 4 _"Worker" " 20" 5 (Drake Glider) 10 1 -12 (ADV=Sky Drake) LEVEL=0 (WORKER_TEXT="
" + {WORKER_STRING}) EXTRA_EFFECT={CE_ABILITY_WORKER}}
					image="units/drakes/glider.png~TC($side_number, magenta)"
				[/option]
			[/message]
		[/then]
	[/elseif]
#enddef

#define ORCS_RECRUITS VILLAGE_TYPE
	# Similar to humans, but have a 3g cavalry.
	# Their cavalry has another movetype.
	# Need 1 move less for mountains and hills, are worse on fungus.
	[elseif]
		[have_location]
			x,y=$x1,$y1
			terrain={VILLAGE_TYPE}
		[/have_location]
		[then]
			[message]
				speaker=narrator
				image="portraits/orcs/warlord.webp"
				message=_ "You have $gold gold. Select a unit to recruit:"
				wait_description=_"recruitment"
				[option]
					label={BACK_STRING}
				[/option]
				[option]
					{CONQUEST_UNIT 1 _"Militia" " 25" 7 (Orcish Grunt) 10 2 -13 (ADV=Orcish Warrior)}
					image="units/orcs/grunt.png~TC($side_number, magenta)"
				[/option]
				[option]
					# po: 3 gold unit
					{CONQUEST_UNIT 3 _"Light Cavalry" " 65" 10 (Wolf Rider) 12 4 33 (ADV=Goblin Knight,Goblin Pillager)}
					image="units/goblins/wolf-rider.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 5 _"Cavalry" " 90" 10 (Goblin Knight) 12 6 41 (ADV=Direwolf Rider)}
					image="units/goblins/knight.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 8 _"Elite Infantry" 130 7 (Orcish Ruler) 18 6 70 (ADV=Orcish Sovereign)}
					image="units/orcs/ruler.png~TC($side_number, magenta)"
				[/option]
				[option]
					# po: 9 gold unit. Keep the name short.
					{CONQUEST_UNIT 9 _"Direwolver" 140 10 (Direwolf Rider) 20 6 79 REMOVE=amlas (REMOVE_ATTACK=
					[or]
						name=claws
					[/or])}
					image="units/goblins/direwolver.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 15 _"Commander" 200 8 (Orcish Sovereign) 36 5 125 REMOVE=amlas}
					image="units/orcs/sovereign.png~TC($side_number, magenta)"
				[/option]
				[option]
					{ASSASSIN_OPTION}
				[/option]
				[option]
					# po: 20 gold unit
					{CONQUEST_UNIT 20 _"Troll" 250 8 (Troll Warrior) 44 6 180 REMOVE=amlas}
					image="units/trolls/warrior.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 4 _"Worker" " 20" 5 (Goblin Spearman) 10 1 2 (ADV=Goblin Impaler,Goblin Rouser) LEVEL=0 (WORKER_TEXT="
" + {WORKER_STRING} ) (EXTRA_EFFECT=
						{CE_ABILITY_WORKER}
						[effect]
							apply_to=zoc
							value=yes
						[/effect])}
					image="units/goblins/spearman.png~TC($side_number, magenta)"
				[/option]
			[/message]
		[/then]
	[/elseif]
#enddef

#define UNDEAD_RECRUITS VILLAGE_TYPE
	# Have in-between level units (lvl 2, 4 …)
	# Skeleton units have more defense in swamps and can cross deep water.
	# Ghost units have a good movetype.
	[elseif]
		[have_location]
			x,y=$x1,$y1
			terrain={VILLAGE_TYPE}
		[/have_location]
		[then]
			[message]
				speaker=narrator
				image="portraits/undead/spectre.webp"
				message=_ "You have $gold gold. Select a unit to recruit:"
				wait_description=_"recruitment"
				[option]
					label={BACK_STRING}
				[/option]
				[option]
					{CONQUEST_UNIT 2 _"Militia" " 45" 7 (Skeleton) 12 3 11 (ADV=Revenant,Deathblade)}
					image="units/undead-skeletal/skeleton/skeleton.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 4 _"Infantry" " 80" 7 (Revenant) 12 5 33 (ADV=Draug)}
					image="units/undead-skeletal/revenant/revenant.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 6 _"Cavalry" 100 10 (Wraith) 13 6 75 (ADV=Spectre)}
					image="units/undead-spirit/wraith-s.png~TC($side_number, magenta)"
				[/option]
				[option]
					# TODO: maybe rename
					# po: 9 gold unit
					{CONQUEST_UNIT 9 _"Chocobone" 140 10 (Chocobone) 20 6 95 REMOVE=amlas}
					image="units/undead-skeletal/chocobone.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 15 _"Commander" 200 8 (Draug) 36 5 132 REMOVE=amlas}
					image="units/undead-skeletal/draug.png~TC($side_number, magenta)"
				[/option]
				[option]
					{ASSASSIN_OPTION}
				[/option]
				[option]
					# po: 20 gold unit
					{CONQUEST_UNIT 20 _"Spectre" 250 8 (Spectre) 44 6 217 REMOVE=amlas}
					image="units/undead-spirit/spectre.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 4 _"Worker" " 20" 5 (Walking Corpse) 10 1 2 (ADV=Soulless) LEVEL=0 (WORKER_TEXT="
" + {WORKER_STRING} ) (EXTRA_EFFECT=
						{CE_ABILITY_WORKER}
						[effect]
							apply_to=zoc
							value=yes
						[/effect])}
					image="units/undead/zombie.png~TC($side_number, magenta)"
				[/option]
			[/message]
		[/then]
	[/elseif]
#enddef

#define ELVISH_MILITIA
	{CONQUEST_UNIT 1 _"Militia" " 25" 7 (Elvish Fighter) 10 2 -8 ALIGN= (ADV=Elvish Captain,Elvish Hero)}
#enddef

#define ELVISH_LIGHT_CAVALRY
	{CONQUEST_UNIT 3 _"Light Cavalry" " 65" 10 (Elvish Scout) 12 4 33 ALIGN= (ADV=Elvish Rider)}
#enddef

#define ELVISH_CAVALRY
	{CONQUEST_UNIT 5 _"Cavalry" " 90" 10 (Elvish Rider) 12 6 41 ALIGN= (ADV=Elvish Outrider)}
#enddef

#define ELVISH_ELITE
	{CONQUEST_UNIT 8 _"Elite Infantry" 130 7 (Elvish Captain) 18 6 83 ALIGN= (ADV=Elvish Marshal)}
#enddef

#define ELVISH_OUTRIDER
	# po: 10 gold unit
	{CONQUEST_UNIT 9 _"Outrider" 140 10 (Elvish Outrider) 20 6 80 ALIGN= REMOVE=amlas}
#enddef

#define ELVISH_MARSHAL
	{CONQUEST_UNIT 15 _"Commander" 200 8 (Elvish Marshal) 36 5 132 ALIGN= REMOVE=amlas}
#enddef

#define ELVISH_ENCHANTRESS
	# po: 20 gold unit
	{CONQUEST_UNIT 20 _"Enchantress" 250 8 (Elvish Enchantress) 44 6 200 (EXTRA_EFFECT=
		[effect]
			apply_to=defense
			replace=yes
			[defense]
				forest=40
			[/defense]
		[/effect]) (ENCHANTRESS_TEXT=" " + _"(60% wood defense)") ALIGN= (ADV=Elvish Sylph)} # wmllint: ignore
#enddef

#define ELVES_RECRUITS VILLAGE_TYPE
	# Like human, but 60% in forest and different movement type.
	# Have a 3g cavalry which is good to get villages in early game.
	[elseif]
		[have_location]
			x,y=$x1,$y1
			terrain={VILLAGE_TYPE}
		[/have_location]
		[then]
			[message]
				speaker=narrator
				image="portraits/elves/sylph.webp"
				message=_ "You have $gold gold. Select a unit to recruit:"
				wait_description=_"recruitment"
				[option]
					label={BACK_STRING}
				[/option]
				[option]
					{ELVISH_MILITIA}
					image="units/elves-wood/fighter/fighter.png~TC($side_number, magenta)"
				[/option]
				[option]
					{ELVISH_LIGHT_CAVALRY}
					image="units/elves-wood/scout/scout.png~TC($side_number, magenta)"
				[/option]
				[option]
					{ELVISH_CAVALRY}
					image="units/elves-wood/rider/rider.png~TC($side_number, magenta)"
				[/option]
				[option]
					{ELVISH_ELITE}
					image="units/elves-wood/captain.png~TC($side_number, magenta)"
				[/option]
				[option]
					{ELVISH_OUTRIDER}
					image="units/elves-wood/outrider/outrider.png~TC($side_number, magenta)"
				[/option]
				[option]
					{ELVISH_MARSHAL}
					image="units/elves-wood/marshal.png~TC($side_number, magenta)"
				[/option]
				[option]
					{ASSASSIN_OPTION}
				[/option]
				[option]
					{ELVISH_ENCHANTRESS}
					image="units/elves-wood/enchantress.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 4 _"Worker" " 20" 5 (Peasant) 10 1 2 (ADV=Spearman,Bowman) LEVEL=0 (WORKER_TEXT="
" + {WORKER_STRING} ) (EXTRA_EFFECT=
						{CE_ABILITY_WORKER}
						[effect]
							apply_to=zoc
							value=yes
						[/effect])}
					image="units/human-peasants/peasant.png~TC($side_number, magenta)"
				[/option]
			[/message]
		[/then]
	[/elseif]
#enddef

#define MERFOLK_RECRUITS VILLAGE_TYPE
	# Can have more defense than boats on some fields. Have usually less moves.
	# Can go into swamps and onto land.
	# Special is that they have a 20g unit, as a 20g ship does not exist.
	[elseif]
		[have_location]
			x,y=$x1,$y1
			terrain={VILLAGE_TYPE}
		[/have_location]
		[then]
			[message]
				speaker=narrator
				image="portraits/merfolk/spearman.webp"
				message=_ "You have $gold gold. Select a unit to recruit:"
				wait_description=_"recruitment"
				[option]
					label={BACK_STRING}
				[/option]
				[option]
					{CONQUEST_UNIT 1 _"Militia" " 25" 7 (Merman Hunter) 10 2 -8 (ADV=Merman Spearman, Merman Netcaster)}
					image="units/merfolk/hunter.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 3 _"Infantry" " 65" 7 (Merman Fighter) 12 4 29 (ADV=Merman Warrior)}
					image="units/merfolk/fighter.png~TC($side_number, magenta)"
				[/option]
				[option]
					# TODO: maybe rename, would allow to use Heavy Infantry unit for humans
					# po: 5 gold unit
					{CONQUEST_UNIT 5 _"Heavy Infantry" " 90" 7 (Merman Warrior) 12 6 40 (ADV=Merman Triton,Merman Hoplite)}
					image="units/merfolk/warrior.png~TC($side_number, magenta)"
				[/option]
				[option]
					# po: 8 gold unit
					{CONQUEST_UNIT 8 _"Cuttle Fish" 130 8 (Cuttle Fish) 18 6 63 REMOVE=amlas (ENCHANTRESS_TEXT=" "+_"(60% deep water defense)")}
					image="units/monsters/cuttlefish.png~TC($side_number, magenta)"
				[/option]
				[option]
					# po: 10 gold unit
					{CONQUEST_UNIT 10 _"Water Serpent" 150 8 (Water Serpent) 22 6 100 REMOVE=amlas}
					image="units/monsters/water-serpent.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 15 _"Commander" 200 8 (Merman Hoplite) 36 5 148 REMOVE=amlas}
					image="units/merfolk/hoplite.png~TC($side_number, magenta)"
				[/option]
				[option]
					# po: 15 gold assassination unit
					{CONQUEST_UNIT 15 _"Siren" 185 8 (Mermaid Siren) 15 6 134 (ASSASSIN_TEXT=" ("+ {FIRSTSTIKE_STRING} + ")
" + _"90x6 versus 25 gold units" )
						LEVEL=9 REMOVE=amlas (EXTRA_SPECIALS={WEAPON_SPECIAL_FIRSTSTRIKE} {CE_WEAPON_SPECIAL_ASSASSIN} )}
					image="units/merfolk/siren.png~TC($side_number, magenta)"
				[/option]
				[option]
					# po: 20 gold sea serpent
					{CONQUEST_UNIT 20 _"Sea Monster" 250 10 (Sea Serpent) 44 6 165 REMOVE=amlas (ENCHANTRESS_TEXT=" "+_"(60% deep water defense)")}
					image="units/monsters/seaserpent.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 4 _"Worker" " 20" 5 (Mermaid Initiate) 10 1 -7 (ADV=Mermaid Priestess,Mermaid Enchantress)
						LEVEL=0 (WORKER_TEXT="
" + {WORKER_STRING}) EXTRA_EFFECT={CE_ABILITY_WORKER}}
					image="units/merfolk/initiate.png~TC($side_number, magenta)"
				[/option]
			[/message]
		[/then]
	[/elseif]
#enddef

#define DUNEFOLK_RECRUITS VILLAGE_TYPE
	# Dunefolk has more mounted units than others and is better in sandy terrain.
	# 50% on desert and 55% on hills for foot soldiers
	# 45% on desert and 50% on hills for mounted units
	[elseif]
		[have_location]
			x,y=$x1,$y1
			terrain={VILLAGE_TYPE}
		[/have_location]
		[then]
			[message]
				speaker=narrator
				image="portraits/dunefolk/rover.webp"
				message=_ "You have $gold gold. Select a unit to recruit:"
				wait_description=_"recruitment"
				[option]
					label={BACK_STRING}
				[/option]
				[option]
					{CONQUEST_UNIT 1 _"Militia" " 25" 7 (Dune Rover) 10 2 -8 (ADV=Dune Explorer) (EXTRA_EFFECT=
						[effect]
							apply_to=defense
							replace=yes
							[defense]
								hills=45
								forest=60
							[/defense]
						[/effect])}
					image="units/dunefolk/rover/rover.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 3 _"Light Cavalry" " 65" 10 (Dune Rider) 12 4 32 (ADV=Dune Horse Archer,Dune Raider,Dune Sunderer) (EXTRA_EFFECT=
						[effect]
							apply_to=defense
							replace=yes
							[defense]
								mountains=100
								hills=50
								sand=55
							[/defense]
						[/effect]
						[effect]
							apply_to=movement_costs
							replace=yes
							[movement_costs]
								mountains={UNREACHABLE}
							[/movement_costs]
						[/effect])}
					image="units/dunefolk/rider/rider.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 5 _"Cavalry" " 90" 10 (Dune Raider) 12 6 45 (ADV=Dune Marauder) (EXTRA_EFFECT=
						[effect]
							apply_to=defense
							replace=yes
							[defense]
								mountains=100
								hills=50
								sand=55
							[/defense]
						[/effect]
						[effect]
							apply_to=movement_costs
							replace=yes
							[movement_costs]
								mountains={UNREACHABLE}
							[/movement_costs]
						[/effect])}
					image="units/dunefolk/rider/raider.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 8 _"Elite Infantry" 130 7 (Dune Swordsman) 18 6 74 (ADV=Dune Blademaster) (REMOVE_ATTACK=
						[or]
							name=scimitar_balance
						[/or]) (EXTRA_EFFECT=
						[effect]
							apply_to=defense
							replace=yes
							[defense]
								hills=45
								mountains=40
								village=40
								sand=50
							[/defense]
						[/effect]
						[effect]
							apply_to=attack
							#textdomain wesnoth-units
							set_description=_"sword"
						[/effect])}
					image="units/dunefolk/soldier/swordsman.png~TC($side_number, magenta)"
				[/option]
				[option]
					#textdomain wesnoth-Conquest
					# po: 10 gold unit
					{CONQUEST_UNIT 10 _"Heavy Cavalry" 150 10 (Dune Sunderer) 22 6 95 (ADV=Dune Cataphract) (EXTRA_EFFECT=
						[effect]
							apply_to=defense
							replace=yes
							[defense]
								mountains=100
								sand=55
							[/defense]
						[/effect]
						[effect]
							apply_to=movement_costs
							replace=yes
							[movement_costs]
								mountains={UNREACHABLE}
							[/movement_costs]
						[/effect])}
					image="units/dunefolk/rider/sunderer.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 15 _"Commander" 200 8 (Dune Paragon) 36 5 118 REMOVE=amlas (REMOVE_ATTACK=
						[or]
							name=pommel strike
						[/or]) (EXTRA_EFFECT=
						[effect]
							apply_to=defense
							replace=yes
							[defense]
								hills=45
								mountains=40
								village=40
								sand=50
							[/defense]
						[/effect])}
					image="units/dunefolk/soldier/paragon.png~TC($side_number, magenta)"
				[/option]
				[option]
					{ASSASSIN_OPTION}
				[/option]
				[option]
					# po: 20 gold unit
					{CONQUEST_UNIT 20 _"Cataphract" 250 10 (Dune Cataphract) 44 6 179 REMOVE=amlas (REMOVE_ATTACK=
						[or]
							name=lance
						[/or]) (EXTRA_EFFECT=
						[effect]
							apply_to=defense
							replace=yes
							[defense]
								mountains=100
								sand=55
							[/defense]
						[/effect]
						[effect]
							apply_to=movement_costs
							replace=yes
							[movement_costs]
								mountains={UNREACHABLE}
							[/movement_costs]
						[/effect])}
					image="units/dunefolk/rider/cataphract.png~TC($side_number, magenta)"
				[/option]
				[option]
					{CONQUEST_UNIT 4 _"Worker" " 20" 5 (Peasant) 10 1 2 (ADV=Spearman,Bowman) LEVEL=0 (WORKER_TEXT="
" + {WORKER_STRING} ) (EXTRA_EFFECT=
						{CE_ABILITY_WORKER}
						[effect]
							apply_to=zoc
							value=yes
						[/effect])}
					image="units/human-peasants/peasant.png~TC($side_number, magenta)"
				[/option]
			[/message]
		[/then]
	[/elseif]
#enddef

#define RECRUIT_UNIT_MENU RECRUIT_LISTS
	# Usage:
	#
	# {RECRUIT_UNIT_MENU (
	#      {HUMAN_RECRUITS *^Vh*}
	#      {ELVES_RECRUITS *^Ve*}
	# )}
	#
	# All recruit lists are part of one [set_menu_item], so that one can assign a hotkey which is used by all.
	# The filter of the menu_item is matching all villages.
	# The second filter for the faction, one needs to take care that all possible villages types are handled here!
	# (Either generally handling all villages or at least not missing villages from the map)

#arg VILLAGES
*^V* #endarg

	[event]
		name=prestart

		[set_menu_item]
			id=aaa_recruitunit
			description=_"Recruit Unit"

			[default_hotkey]
				key="g"
			[/default_hotkey]

			[filter_location]
				terrain={VILLAGES}
				owner_side=$side_number
				[not]
					[filter]
						x=$x1
						y=$y1
					[/filter]
				[/not]
			[/filter_location]

			[command]
				[store_gold]
					side=$side_number
					variable=gold
				[/store_gold]
				[if]
					[false][/false]
					[then][/then]
					{RECRUIT_LISTS}
					[else]
						[message]
							speaker=narrator
							# po: Error message, if the recruit menu was not correctly set up.
							message= _ "No units can be recruited in this village."
						[/message]
					[/else]
				[/if]
				{CLEAR_VARIABLE gold}
				[redraw]
					side=$side_number
				[/redraw]
			[/command]
		[/set_menu_item]
	[/event]
#enddef
